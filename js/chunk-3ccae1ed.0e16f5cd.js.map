{"version":3,"sources":["webpack:///./src/views/My.vue?b849","webpack:///src/views/My.vue","webpack:///./src/views/My.vue?917e","webpack:///./src/views/My.vue","webpack:///./src/views/My.vue?6516"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","token","Data","userBg","on","showPopup","model","value","callback","$$v","show","expression","style","fileImg","afterRead","class","active","cancel","_v","determine","userImg","staticStyle","Login","_e","_s","nickName","desc","_l","item","index","key","$event","GoTo","title","staticRenderFns","name","data","MyData","ImgData","StartTime","mounted","$cookies","get","FindMy","methods","AntiShake","Date","getTime","endTime","axios","method","url","params","tokenString","$router","push","setTimeout","serverBase64Img","file","content","split","imgType","component"],"mappings":"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","file":"js/chunk-3ccae1ed.0e16f5cd.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"My_con\"},[_c('img',{attrs:{\"src\":_vm.token == null ? require('../assets/images/MyBg.jpg') : _vm.Data.userBg,\"alt\":\"#\"},on:{\"click\":_vm.showPopup}}),_c('div',{staticClass:\"My_body\"},[_c('van-popup',{staticClass:\"Per_edit\",attrs:{\"close-on-click-overlay\":false},model:{value:(_vm.show),callback:function ($$v) {_vm.show=$$v},expression:\"show\"}},[_c('van-uploader',{staticClass:\"uploader\",style:(_vm.fileImg == 'photograph'\n            ? 'font-size: 20px !important;'\n            : 'font-size: 100px !important;'),attrs:{\"upload-icon\":_vm.fileImg,\"after-read\":_vm.afterRead}}),_c('div',[_c('button',{class:_vm.active === 0 ? 'active' : '',on:{\"click\":_vm.cancel}},[_vm._v(\" 取消 \")]),_c('button',{class:_vm.active === 1 ? 'active' : '',on:{\"click\":_vm.determine}},[_vm._v(\" 确定 \")])])],1),_c('div',[_c('div',[_c('img',{attrs:{\"src\":_vm.token == null\n              ? require('../assets/images/My_user.png')\n              : _vm.Data.userImg,\"alt\":\"#\"}}),_c('div',[(_vm.token == null)?_c('div',[_c('p',{staticStyle:{\"font-size\":\"14px\",\"font-weight\":\"bold\"}},[_vm._v(\"未登录\")]),_c('p',{staticStyle:{\"font-size\":\"16px\",\"font-weight\":\"bold\",\"margin-top\":\"10px\"},on:{\"click\":_vm.Login}},[_vm._v(\" 点击跳转登录 \")])]):_vm._e(),(_vm.token != null)?_c('div',[_c('p',{staticStyle:{\"color\":\"#0c34ba\",\"font-size\":\"14px\",\"font-weight\":\"bold\"}},[_vm._v(\" \"+_vm._s(_vm.Data.nickName)+\" \")]),_c('p',{staticStyle:{\"color\":\"#999\",\"font-size\":\"12px\",\"margin\":\"10px 0\"}},[_vm._v(\" \"+_vm._s(_vm.Data.desc)+\" \")])]):_vm._e()])]),_c('ul',_vm._l((_vm.MyData),function(item,index){return _c('li',{key:index,on:{\"click\":function($event){return _vm.GoTo(index)}}},[_c('span',[_vm._v(_vm._s(item.title))]),_c('img',{attrs:{\"src\":require(\"../assets/images/right.png\"),\"alt\":\"#\"}})])}),0)])],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div v-cloak class=\"My_con\">\r\n    <img\r\n      @click=\"showPopup\"\r\n      :src=\"token == null ? require('../assets/images/MyBg.jpg') : Data.userBg\"\r\n      alt=\"#\"\r\n    />\r\n\r\n    <div class=\"My_body\">\r\n      <van-popup\r\n        class=\"Per_edit\"\r\n        :close-on-click-overlay=\"false\"\r\n        v-model=\"show\"\r\n      >\r\n        <van-uploader\r\n          :upload-icon=\"fileImg\"\r\n          :after-read=\"afterRead\"\r\n          :style=\"\r\n            fileImg == 'photograph'\r\n              ? 'font-size: 20px !important;'\r\n              : 'font-size: 100px !important;'\r\n          \"\r\n          class=\"uploader\"\r\n        />\r\n\r\n        <div>\r\n          <button :class=\"active === 0 ? 'active' : ''\" @click=\"cancel\">\r\n            取消\r\n          </button>\r\n          <button :class=\"active === 1 ? 'active' : ''\" @click=\"determine\">\r\n            确定\r\n          </button>\r\n        </div>\r\n      </van-popup>\r\n      <div>\r\n        <div>\r\n          <img\r\n            :src=\"\r\n              token == null\r\n                ? require('../assets/images/My_user.png')\r\n                : Data.userImg\r\n            \"\r\n            alt=\"#\"\r\n          />\r\n          <div>\r\n            <div v-if=\"token == null\">\r\n              <p style=\"font-size: 14px; font-weight: bold\">未登录</p>\r\n              <p\r\n                @click=\"Login\"\r\n                style=\"font-size: 16px; font-weight: bold; margin-top: 10px\"\r\n              >\r\n                点击跳转登录\r\n              </p>\r\n            </div>\r\n            <div v-if=\"token != null\">\r\n              <p style=\"color: #0c34ba; font-size: 14px; font-weight: bold\">\r\n                {{ Data.nickName }}\r\n              </p>\r\n              <p style=\"color: #999; font-size: 12px; margin: 10px 0\">\r\n                {{ Data.desc }}\r\n              </p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <ul>\r\n          <li v-for=\"(item, index) in MyData\" :key=\"index\" @click=\"GoTo(index)\">\r\n            <span>{{ item.title }}</span>\r\n            <img src=\"../assets/images/right.png\" alt=\"#\" />\r\n          </li>\r\n        </ul>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script>\r\nimport { Toast } from \"vant\";\r\nexport default {\r\n  name: \"My\",\r\n  data() {\r\n    return {\r\n      MyData: [\r\n        { title: \"个人资料\", path: \"PersonalData\" },\r\n        { title: \"我的订单\", path: \"MyOrder\" },\r\n        { title: \"我的收藏\", path: \"MyCollection\" },\r\n        { title: \"地址管理\", path: \"Address\" },\r\n        { title: \"账号设置\", path: \"AccountSet\" },\r\n      ],\r\n      token: \"\",\r\n      Data: [],\r\n      show: false,\r\n      active: \"\",\r\n      fileImg: \"photograph\",\r\n      ImgData: {},\r\n      StartTime: \"\",\r\n    };\r\n  },\r\n  mounted() {\r\n    this.token = this.$cookies.get(\"token\");\r\n    this.FindMy();\r\n  },\r\n  methods: {\r\n    AntiShake() {\r\n      if (this.StartTime == \"\") {\r\n        this.StartTime = new Date().getTime();\r\n      } else {\r\n        var endTime = new Date().getTime();\r\n        if (endTime - this.StartTime < 2000) return true;\r\n      }\r\n    },\r\n    FindMy() {\r\n      if (this.token == \"\") return;\r\n      this.axios({\r\n        method: \"GET\",\r\n        url: \"/findMy\",\r\n        params: {\r\n          tokenString: this.token,\r\n        },\r\n      })\r\n        .then((res) => {\r\n          this.Data = res.data.result[0];\r\n          if (this.Data.desc == \"\") this.Data.desc = \"这家伙很懒，什么都没留下\";\r\n        })\r\n        .catch((err) => {});\r\n    },\r\n    Login() {\r\n      if (this.AntiShake()) return;\r\n      this.$router.push({ name: \"Login\" });\r\n    },\r\n    GoTo(index) {\r\n      if (this.token == null) {\r\n        if (this.AntiShake()) return;\r\n        Toast(\"您尚未登录，请先前去登录\");\r\n        setTimeout(() => {\r\n          this.$router.push({ name: \"Login\" });\r\n        }, 2000);\r\n        return;\r\n      } else {\r\n        this.$router.push({ name: this.MyData[index].path });\r\n      }\r\n    },\r\n    showPopup(index, value) {\r\n      if (this.token == null) {\r\n        if (this.AntiShake()) return;\r\n        Toast(\"您尚未登录，请先前去登录\");\r\n        setTimeout(() => {\r\n          this.$router.push({ name: \"Login\" });\r\n        }, 2000);\r\n        return;\r\n      }\r\n      this.show = true;\r\n    },\r\n    afterRead(file) {\r\n      var serverBase64Img = file.content.split(\",\")[1];\r\n      var imgType = file.content.split(\";\")[0].split(\"/\")[1];\r\n      var Data = {\r\n        serverBase64Img,\r\n        imgType,\r\n        tokenString: this.token,\r\n      };\r\n      this.ImgData = Data;\r\n      this.fileImg = require(\"@/assets/images/\" + file.file.name);\r\n    },\r\n    cancel() {\r\n      this.show = false;\r\n      this.active = 0;\r\n      this.fileImg = \"photograph\";\r\n      setTimeout(() => {\r\n        this.active = \"\";\r\n      }, 300);\r\n    },\r\n    determine() {\r\n      this.active = 1;\r\n      setTimeout(() => {\r\n        this.active = \"\";\r\n      }, 300);\r\n\r\n      this.axios({\r\n        method: \"POST\",\r\n        url: \"/updateUserBg\",\r\n        data: {\r\n          ...this.ImgData,\r\n        },\r\n      })\r\n        .then((res) => {\r\n          this.FindMy();\r\n          this.fileImg = \"photograph\";\r\n          setTimeout(() => {\r\n            this.show = false;\r\n            Toast(res.data.msg);\r\n          }, 1000);\r\n        })\r\n        .catch((err) => {});\r\n    },\r\n  },\r\n};\r\n</script>\r\n<style lang=\"less\" scoped>\r\n/deep/ .van-uploader__upload-icon {\r\n  font-size: inherit;\r\n}\r\n.Per_edit {\r\n  width: 300px;\r\n  height: 200px;\r\n  overflow: hidden;\r\n\r\n  .van-icon {\r\n    font-size: inherit !important;\r\n  }\r\n\r\n  .uploader {\r\n    z-index: 1000;\r\n    border-top: none;\r\n    top: 30px;\r\n    left: 110px;\r\n    position: relative !important;\r\n  }\r\n\r\n  > div {\r\n    width: 100%;\r\n    position: absolute;\r\n    display: flex;\r\n    left: 0;\r\n    bottom: 0;\r\n    border-top: 1px solid black;\r\n\r\n    button:first-of-type {\r\n      border-right: 1px solid black;\r\n    }\r\n\r\n    button {\r\n      display: block;\r\n      width: 50%;\r\n      height: 50px;\r\n      border: none;\r\n      background-color: white;\r\n      font-size: 20px;\r\n\r\n      &.active {\r\n        background-color: red !important;\r\n        border: none !important;\r\n        color: white;\r\n      }\r\n    }\r\n  }\r\n}\r\n.My_con {\r\n  position: absolute;\r\n  width: 100%;\r\n  height: calc(~\"100% - 50px\");\r\n  background-color: #eee;\r\n  text-align: start;\r\n\r\n  > img {\r\n    position: absolute;\r\n    width: 100%;\r\n    height: 200px;\r\n    left: 0;\r\n    top: 0;\r\n  }\r\n\r\n  .My_body {\r\n    position: absolute;\r\n    width: 84%;\r\n    margin: 0 auto;\r\n    padding: 3%;\r\n    top: 160px;\r\n    left: 5%;\r\n    background-color: rgba(255, 255, 255, 0.5);\r\n    border-radius: 10px 10px 0 0;\r\n\r\n    > div {\r\n      > div {\r\n        display: flex;\r\n        img {\r\n          width: 60px;\r\n          height: 60px;\r\n          border-radius: 50% 50%;\r\n          margin-right: 15px;\r\n        }\r\n      }\r\n\r\n      ul {\r\n        list-style: none;\r\n        margin-top: 50px;\r\n\r\n        li {\r\n          height: 50px;\r\n          display: flex;\r\n          align-items: center;\r\n          justify-content: space-between;\r\n          border-top: 1px solid #ccc;\r\n\r\n          span {\r\n            font-size: 12px;\r\n            color: #666;\r\n          }\r\n\r\n          img {\r\n            width: 20px;\r\n            height: 20px;\r\n          }\r\n        }\r\n\r\n        li:first-of-type {\r\n          border: none;\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./My.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./My.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./My.vue?vue&type=template&id=d3268efa&scoped=true&\"\nimport script from \"./My.vue?vue&type=script&lang=js&\"\nexport * from \"./My.vue?vue&type=script&lang=js&\"\nimport style0 from \"./My.vue?vue&type=style&index=0&id=d3268efa&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"d3268efa\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./My.vue?vue&type=style&index=0&id=d3268efa&lang=less&scoped=true&\""],"sourceRoot":""}